<!DOCTYPE html>

<head>
    <title>Respoke - IM</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <!-- Respoke client library -->
    <script id="cid0020000188080343995" data-cfasync="false" async src="//st.chatango.com/js/gz/emb.js" style="width: 100%;height: 100%;">{"handle":"sonrisementoring","arch":"js","styles":{"a":"383838","b":100,"c":"FFFFFF","d":"FFFFFF","k":"383838","l":"383838","m":"383838","n":"FFFFFF","p":"10","q":"383838","r":100,"usricon":0,"surl":0,"cnrs":"0.35","fwtickm":1}}</script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    <!--jquery-->     
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css"></style>
</head>

<body>
        
        <nav class="white" role="navigation">
                <div class="nav-wrapper container">
                <a id="logo-container" href="../public/index.html" class="brand-logo">SonRise</a>
            
                  <ul class="right hide-on-med-and-down">
                     <li><a href="../public/m_profile.html">Profile</a></li>
                      <li><a href="../public/mentor.html">Mentor</a></li>
                      <li><a href="../public/mentee.html">Mentee</a></li>
                     <!-- <li><a class="brown-text waves-effect waves-light btn-small">Log in</a></li> -->
                  </ul>
            
                  <ul id="nav-mobile" class="sidenav">
                    <li><a href="../public/m_profile.html">Profile</a></li>
                      <li><a href="../public/mentor.html">Mentor</a></li>
                      <li><a href="../public/mentee.html">Mentee</a></li>
                      <li><a class="brown-text waves-effect waves-light btn-small">Log out</a></li>
                  </ul>
                  <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                </div>
              </nav>
            
              <div id="index-banner" class="parallax-container">
                <div class="section no-pad-bot">
                  <div class="container">
                    <br><br>
                    <h1 class="header center teal-text text-lighten-2">SonRise</h1><br><br>
                    <h2  class="header center teal-text text-lighten-2">Let's chat</h2>                             
                  </div>
                </div>
              </div>
            
    <div class = "container chat">
        <row>
        <h4 id="status">Not Connected</h4>
        </row>
        <row>

            <div class = "col s6">
                <div id="login">
                <input id="endpoint" placeholder="Username" type="text" />
                <button id="doLogin">Connect</button>
                <input id="remoteId" placeholder="User to Message" type="text" /><br/>
                <textarea id="textToSend" placeholder="Message to Send" rows="2"></textarea><br/>
                <button id='sendMessage'>Send Message</button>
                </div>
            </div>
    
            <div class = "col s6">
                <div id="messaging">
                <ul id="messages"></ul><br />        
                </div>
            </div>
        </row>
    </div>


    <script type="text/javascript">
        
        var appid = "b4931d40-ff2b-4c46-8487-bf955a75501d";
        // The ID that other users will identify you by (your username)
        var endpointId;
        // Create the client object using the App ID 
        var client = respoke.createClient({
            appId: appid,
            developmentMode: false
        });
        // "connect" event fired after successful connection to Respoke
        client.listen('connect', function() {
            $("#status").html("Connecting via SonRise as \"" + endpointId + "\"");
        });
        // Listen for incoming messages
        client.listen('message', function(evt) {
            $("#messages").append(
                "<li>" + evt.message.message + "</li>"
            );
        });
        // Connect to Respoke when the user clicks "connect"
        $("#doLogin").click(function() {
            $("#status").html("Connecting...");
            endpointId = $("#endpoint").val();
            client.connect({
                endpointId: endpointId // your username is the endpoint
            });
        });
        // Send message
        $("#sendMessage").click(function() {
            // Get the recipients name
            var remote = $("#remoteId").val();
            // Make an endpoint for that recipient
            var endpoint = client.getEndpoint({
                id: remote
            });
            // Grab the text to send
            var messageText = $("#textToSend").val();
            // Send it
            endpoint.sendMessage({
                message: messageText
            });
            
            // Show yourself the message
            $("#messages").append(
                
                "<li>" + endpointId + ": " + messageText + "</li>"
            );
            // Clear the text you just sent
            $("#textToSend").val('');
        });
    </script>
</body>

</html>