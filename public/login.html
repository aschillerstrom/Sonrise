<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Son Rise Login</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="style/css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="style/css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <script src="https://www.gstatic.com/firebasejs/5.0.1/firebase.js"></script>
    
</head>
<body>
        <div id="index-banner" class="parallax-container">
            <div class="section no-pad-bot">
                <div class="container">
                    <br><br>
                    <!-- Modal Trigger -->
                    <h2>Welcome!</h2>
                            <h2>Please select from the following:</h2>
                    <a class="waves-effect waves-light btn modal-trigger" id="returning" href="#returnmodal">Returning User</a>
                    <a class="waves-effect waves-light btn modal-trigger" id="newuser" href="#newusermodal">New User</a>
                    <!-- Modal Structure -->
                    <div id="modal1" class="modal">
                        <div class="modal-content">
                            <h4>Input your email and password to login</h4>
                            <input id="txtEmail" type="email" placeholder="email@email.com" />
                            <input id="txtPassword" type="password" placeholder="password"/>
                            <button id="btnLogin" class="btn btn-action">Log In</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="parallax"></div>
         </div>
    



              
    <div class="container" id="returnmodal">
        
        
    </div>   
    <div class="container" id="newusermodal">
        <h2>Please answer the following questions:</h2>
        <input id="txtEmail" type="email" placeholder="email@email.com" />
        <input id="txtPassword" type="password" placeholder="password"/>
        <button id="btnSignUp" class="btn btn-secondary">Sign Up</button>
    </div> 
    <footer class="page-footer teal">
            <div class="container">
              <div class="row">
                <div class="col l6 s12">
                  <h5 class="white-text">Company Bio</h5>
                  <p class="grey-text text-lighten-4">We are a team of developer students working on this project like it's our full time job. 
                    Please support our mission</p>
        
        
                </div>
                <div class="col l3 s12">
                  <h5 class="white-text">Settings</h5>
                  <ul>
                    <li><a class="white-text" href="#!">Link 1</a></li>
                    <li><a class="white-text" href="#!">Link 2</a></li>
                    <li><a class="white-text" href="#!">Link 3</a></li>
                    <li><a class="white-text" href="#!">Link 4</a></li>
                  </ul>
                </div>
                <div class="col l3 s12">
                  <h5 class="white-text">Our Team</h5>
                  <ul>
                    <li><a class="white-text" href="#!">Amy</a></li>
                    <li><a class="white-text" href="#!">Chase</a></li>
                    <li><a class="white-text" href="#!">Kat</a></li>
                    <li><a class="white-text" href="#!">Monir</a></li>
                    <li><a class="white-text" href="#!">Wendy</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="footer-copyright">
              <div class="container">
              <!--Made by <a class="brown-text text-lighten-3" href="http://materializecss.com">Materialize</a>-->
              </div>
            </div>
          </footer>
<script src="login.js" type="text/javascript"></script> 
<script>
     console.log("login.js is working");
  var config = {
    apiKey: "AIzaSyASBaPuT5BNt2eXIjn_L4M00q799FbY61o",
    authDomain: "sonrise-b5e2e.firebaseapp.com",
    databaseURL: "https://sonrise-b5e2e.firebaseio.com",
    projectId: "sonrise-b5e2e",
    storageBucket: "sonrise-b5e2e.appspot.com",
    messagingSenderId: "787522362715"
  };
    firebase.initializeApp(config);

//hide and show modals
    var returning = document.getElementById('returning');
    var btnNewUser = document.getElementById('newuser'); 
    document.getElementById("returnmodal").style.visibility = "hidden";
    document.getElementById("newusermodal").style.visibility = "hidden";

    returning.addEventListener('click', e => {
        document.getElementById("modal1").style.visibility = "hidden";
        document.getElementById("newusermodal").style.visibility = "hidden";
        document.getElementById("returnmodal").style.visibility = "visible";
    });

    btnNewUser.addEventListener('click', e => {
        document.getElementById("newusermodal").style.visibility = "visible";
        document.getElementById("modal1").style.visibility = "hidden";
        document.getElementById("returnmodal").style.visibility = "hidden";
    });
   
   
    const txtEmail = document.getElementById('txtEmail');
    const txtPassword = document.getElementById('txtPassword');
    const btnLogin = document.getElementById('btnLogin');
    const btnSignUp = document.getElementById('btnSignUp');
    const auth = firebase.auth()
    //Login event
    btnLogin.addEventListener('click', e => {
      //get email
      const email = txtEmail.value;
      const pass = txtPassword.value;
      const auth = firebase.auth();

      //Sign in
      const promise = auth.signInWithEmailAndPassword(email, pass);
      promise.then(function() {
        window.location.href = "index.html";
      })
      promise.catch(e => {
          console.log(e.message);
        window.alert('Error: ' + e.message);
        });
    

    });
    
    //Sign up event
    btnSignUp.addEventListener('click', e => {
          //Create  check for real email   
      
      //get email
          const email = txtEmail.value;
          const pass = txtPassword.value;
       
          //Sign in
          const promise = auth.createUserWithEmailAndPassword(email, pass);
         

          promise.catch(e => console.log(e.message));
    
    });

    auth.onAuthStateChanged(firebaseUser => {
        if(firebaseUser) {
          console.log(firebaseUser);
          
        } else {
          console.log('not logged in');
        }
    });
    
  
</script>
</body>
</html>